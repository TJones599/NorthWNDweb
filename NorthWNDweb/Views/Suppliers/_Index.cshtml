@using NorthWNDweb.Models
@model List<SuppliersPO>
<table class="table table-striped" style="background-color: lightcyan;">
    <thead>
        <tr>
            <th>
                @Html.LabelFor(model => Model[0].CompanyName)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].ContactName)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].ContactTitle)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].Address)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].City)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].Region)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].PostalCode)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].Country)
            </th>
            <th>
                @Html.LabelFor(model => Model[0].Phone)
            </th>
            @if ((int)Session["Role"] >= 2)
            {
                <th colspan="3" class="text-center">
                    Actions
                </th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (SuppliersPO Supplier in Model)
        {
            <tr>
                <td>
                    @if (!(Supplier.CompanyName is null))
                    {
                        @Html.ActionLink(Supplier.CompanyName, "SupplierDetails", "Suppliers", new { id = Supplier.SupplierID }, new { })
                        @*<text>@Model.CompanyName</text>*@
                    }
                </td>
                <td>
                    @if (!(Supplier.ContactName is null))
                    {
                        <text>@Supplier.ContactName</text>
                    }
                </td>
                <td>
                    @if (!(Supplier.ContactTitle is null))
                    {
                        <text>@Supplier.ContactTitle</text>
                    }
                </td>
                <td>
                    @if (!(Supplier.Address is null))
                    {
                        <text>@Supplier.Address</text>
                    }
                </td>
                <td>
                    @if (!(Supplier.City is null))
                    {
                        <text>@Supplier.City</text>
                    }
                </td>
                <td>
                    @if (!(Supplier.Region is null))
                    {
                        <text>@Supplier.Region</text>
                    }
                </td>
                <td>
                    @if (!(Supplier.PostalCode is null))
                    {
                        <text>@Supplier.PostalCode</text>
                    }
                </td>
                <td>
                    @if (!(Supplier.Country is null))
                    {
                        <text>@Supplier.Country</text>
                    }
                </td>
                <td>
                    @if (!(Supplier.Phone is null))
                    {
                        <text>@Supplier.Phone</text>
                    }
                </td>

                @if ((int)Session["Role"] >= 1)
                {
                    <td>
                        @Ajax.ActionLink("Products",
                       "ViewProductsTable",
                       "Suppliers",
                       new { id = Supplier.SupplierID },
                       new AjaxOptions() { OnSuccess = "DisplayModal",
                           OnFailure = "FailedToLoadModal",
                           HttpMethod = "GET",
                           InsertionMode = InsertionMode.Replace,
                           UpdateTargetId = "modalTable" },
                       new { @class = "btn btn-success" })
                    </td>

                }
                @if ((int)Session["Role"] >= 2)
                {
                    <td>
                        @Html.ActionLink("Update", "UpdateSupplier", "Suppliers", new { id = Supplier.SupplierID }, new { @class = "btn btn-primary" })
                    </td>
                }

                @if ((int)Session["Role"] == 3)
                {
                    <td>
                        @Html.ActionLink("Delete", "DeleteSupplier", "Suppliers", new { id = Supplier.SupplierID }, new { @class = "btn btn-danger" })
                    </td>
                }
            </tr>
        }
    </tbody>
</table>
